apiVersion: v1
kind: ServiceAccount
metadata:
  annotations:
    vault.hashicorp.com/agent-inject: "true"
    vault.hashicorp.com/role: "sa-argocd-server" 
    vault.hashicorp.com/auth-path: auth/kubernetes/kubefirst
    vault.hashicorp.com/agent-inject-secret-jwt-token: "identity/oidc/token/federated"
    vault.hashicorp.com/agent-inject-template-jwt-token: |
      {{- with secret "identity/oidc/token/federated" -}}
      {{ .Data.token }}
      {{- end }}
  labels:
    app.kubernetes.io/component: server
    app.kubernetes.io/name: argocd-server
    app.kubernetes.io/part-of: argocd
  name: argocd-server
  namespace: argocd
