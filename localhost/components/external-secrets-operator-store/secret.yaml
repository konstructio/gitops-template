apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: vault-token
  annotations:
    argocd.argoproj.io/sync-wave: "20"
spec:
  target:
    name: vault-token
  secretStoreRef:
    kind: ClusterSecretStore
    name: vault-secrets-backend
  refreshInterval: 10s
  dataFrom:
    - extract:      
        key: /external-secrets-store
# todo manually create this secret up front
# apiVersion: v1
# kind: Secret
# metadata:
#   name: vault-token
#   namespace: vault
#   annotations:
#     argocd.argoproj.io/sync-wave: "10"
# type: Opaque
# data:
#   token: azFfbG9jYWxfdmF1bHRfdG9rZW4=
