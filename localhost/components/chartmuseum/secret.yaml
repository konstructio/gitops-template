apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: chartmuseum-secrets
  annotations:
    argocd.argoproj.io/sync-wave: "20"
spec:
  target:
    name: chartmuseum
  secretStoreRef:
    kind: ClusterSecretStore
    name: vault-secrets-backend
  refreshInterval: 10s
  dataFrom:
    - extract:      
        key: /chartmuseum
---
# todo manually create this secret up front
# apiVersion: v1
# kind: Secret
# metadata:
#   name: chartmuseum
#   namespace: chartmuseum
# type: Opaque
# data:
#   BASIC_AUTH_USER: az1yYXk=
#   BASIC_AUTH_PASS: ZmVlZGtyYXlzdGFycw==
#   AWS_ACCESS_KEY_ID: az1yYXk=
#   AWS_SECRET_ACCESS_KEY: ZmVlZGtyYXlzdGFycw==
