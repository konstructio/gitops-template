apiVersion: external-secrets.io/v1beta1
kind: ExternalSecret
metadata:
  name: atlantis-secrets
  annotations:
    argocd.argoproj.io/sync-wave: "20"
spec:
  target:
    name: atlantis-secrets
  secretStoreRef:
    kind: ClusterSecretStore
    name: vault-secrets-backend
  refreshInterval: 10s
  dataFrom:
    - extract:      
        key: /atlantis
---
# todo manually create this secret up front
###  Created by code, for now.
# kind: Secret
# metadata:
#   name: atlantis-secrets
#   namespace: atlantis
# type: Opaque
# data:
#   ATLANTIS_GH_HOSTNAME: Z2l0aHViLmNvbQ==
#   ATLANTIS_GH_TOKEN: YOUR_TOKEN
#   ATLANTIS_GH_USER: a3ViZTFzdA==
#   ATLANTIS_GH_WEBHOOK_SECRET: endMc2Z2anVNYVZ6S0JhdXppcXU=
